<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Infinite Scroll</title>
    <style>
    </style>
</head>

<body>
    <div id="container">
        <div id='images'></div>
    </div>
    <div id="infinite-scroll-trigger"></div>
    <div class='more-content'> Loading more content</div>
    <script>
        const images = document.querySelector('#images');
        const ids = Array.from(Array(10).keys(), n => n + 1)
        const displayImages = (ids) => {
            return ids.map((id) => {
                return `<li>
                <img src='http://api.adorable.io/avatars/${id}' width='250' height='250'>
                </li>`
            }).join('');
        }
        /*
        setListItems(prevState => ([...prevState, ...Array.from(Array(20).keys(), n => n + prevState.length + 1)]));
        */
        images.innerHTML = displayImages(ids);
        const options = {
            root: document.querySelector('#container'),
            threshold: 1.0
        }
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.intersectionRatio > 0) {
                    setTimeout(() => {
                        console.log('set time out');
                        /*
                        ids = [...ids,...Array.from(Array(10).keys(), n => n + ids.length + 1) ];
                        images.innerHTML = displayImages(ids);
                        */
                    }, 1000);
                }
            });
        }, options)
        observer.observe(document.querySelector('#infinite-scroll-trigger'));
    </script>
</body>

</html>